<image schemaversion="7.5" name="piccolo-os">
  <description type="system">
    <author>Piccolo</author>
    <contact>oss@piccolospace.com</contact>
    <specification>MicroOS-based headless appliance with piccolod</specification>
  </description>

  <preferences>
    <type image="iso" filesystem="btrfs" firmware="uefi"/>
    <version>1.0.0</version>
    <rpm-excludedocs>true</rpm-excludedocs>
    <rpm-check-signatures>true</rpm-check-signatures>
    <locale>en_US</locale>
    <keytable>us</keytable>
    <timezone>UTC</timezone>
    <packagemanager>zypper</packagemanager>
  </preferences>

  <!-- Use faster mirror closer to your location -->
  <repository type="rpm-md">
    <source path="https://download.opensuse.org/tumbleweed/repo/oss/"/>
  </repository>
  <repository type="rpm-md">
    <source path="https://download.opensuse.org/tumbleweed/repo/non-oss/"/>
  </repository>
  <repository type="rpm-md">
    <source path="https://download.opensuse.org/update/tumbleweed/"/>
  </repository>

  <packages type="bootstrap">
    <package name="coreutils"/>
    <package name="gawk"/>
    <package name="gzip"/>
    <package name="hostname"/>
    <package name="openssl"/>
    <package name="libz1"/>
    <package name="filesystem"/>
    <package name="glibc-locale-base"/>
    <package name="ca-certificates-mozilla"/>
  </packages>

  <packages type="image">
    <!-- MicroOS Base Patterns -->
    <package name="patterns-microos-basesystem"/>
    <package name="patterns-microos-base-zypper"/>
    <package name="patterns-microos-defaults"/>

    <!-- Required for live ISO -->
    <package name="dracut-kiwi-live"/>
    <package name="kernel-default"/>

    <!-- Networking -->
    <package name="NetworkManager"/>
    <package name="chrony"/>

    <!-- Container runtime -->
    <package name="podman"/>
    <package name="conmon"/>
    <package name="crun"/>

    <!-- Boot chain -->
    <package name="shim"/>
    <package name="grub2"/>
    <package name="grub2-x86_64-efi"/>

    <!-- Microcode -->
    <package name="ucode-amd"/>
    <package name="ucode-intel"/>

    <!-- Essential for atomic updates -->
    <package name="transactional-update"/>
    <package name="rebootmgr"/>
  </packages>



</image>